<html>
<head>
    <style>
        .level {
            width: 720px;
            height: 360px;
        }

        .level iframe {
            left: 0;
            width: 1280px;
            height: 720px;
            transform: scale(0.5,0.5);
            -webkit-transform: scale(0.5, 0.5) translate(-640px,-360px);
        }
    </style>
    <script src="../../bower_components/jquery/jquery.js"></script>
    <script type="text/javascript">
        function patch(elementId, otherElementId) {
            var doc = document.getElementById(elementId).contentWindow.hypeDocument();
            var otherDoc = document.getElementById(otherElementId).contentWindow.hypeDocument();

            function patch(methodName) {
                var sourceFunc = doc[methodName];
                var destFunc = otherDoc[methodName];
                doc[methodName] = function(){
                    sourceFunc.apply(this, arguments);
                    destFunc.apply(this, arguments);
                };
            }

            var methods = ["startTimelineNamed", "pauseTimelineNamed", "continueTimelineNamed", "showSceneNamed"];
            for(var i=0;i<methods.length; i++) {
                patch(methods[i]);
            }
        }
    </script>
</head>
    <body>
    <div class="level"><iframe id="level1" src="TestLevel.html"></iframe></div>
    <div class="level"><iframe id="level2" src="TestLevel.html"></iframe></div>
    </body>

    <script>
        window.l1 = document.getElementById("level1");
        // TODO: use robust way to understand when animations are loaded
        setTimeout(function(){
            patch("level1", "level2");
//            patch("level2", "level1");
        }, 300);

    </script>
</html>